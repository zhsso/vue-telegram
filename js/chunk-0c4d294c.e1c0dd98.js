(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c4d294c"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},1474:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"news"},[s("common-top",{directives:[{name:"show",rawName:"v-show",value:e.topFlag,expression:"topFlag"}],attrs:{"header-title":e.headerTitle},on:{newsToast:e.newsToast},scopedSlots:e._u([{key:"iconleft",fn:function(){return[s("mt-button",{staticClass:"edit-left",nativeOn:{click:function(t){return t.preventDefault(),e.newsToast(t)}}},[e._v("编辑")])]},proxy:!0},{key:"icon",fn:function(){return[s("i",{staticClass:"mui-icon mui-icon-compose"})]},proxy:!0}])}),s("news-list",{ref:"newList",on:{searchCancel:e.searchCancel},scopedSlots:e._u([{key:"search",fn:function(){return[s("common-search",{ref:"search",attrs:{content:"***"},on:{changeLayout:e.change,reset:e.recovery}})]},proxy:!0}])})],1)},n=[],i=(s("ac1f"),s("841c"),s("057d")),r=s("fbbe"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{ref:"news",staticClass:"news-content",class:{"change-top":e.isTop}},[s("ul",{ref:"ul",staticClass:"message-list clearfix",style:{minHeight:e.ulMinHeight}},[e._t("search"),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.issearchAll&&!e.issticky,expression:"!issearchAll && !issticky"}],staticClass:"nav"},[s("mt-button",{class:{"btn-bottom":"all"===e.active},attrs:{size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.goAll(t)}}},[e._v("all")]),s("mt-button",{class:{"btn-bottom":"person"===e.active},attrs:{size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.goPerson(t)}}},[e._v("Personal"),s("mt-badge",{directives:[{name:"show",rawName:"v-show",value:e.getPersonUnreadCount>0,expression:"getPersonUnreadCount > 0"}],attrs:{type:"primary",size:"small"}},[e._v(e._s(e.getPersonUnreadCount))])],1),s("mt-button",{class:{"btn-bottom":"unread"===e.active},attrs:{size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.goUnread(t)}}},[e._v("Unread"),s("mt-badge",{directives:[{name:"show",rawName:"v-show",value:e.getUnreadDialog>0,expression:"getUnreadDialog > 0"}],attrs:{type:"primary",size:"small"}},[e._v(e._s(e.getUnreadDialog))])],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.issearchAll,expression:"!issearchAll"}],staticClass:"page-tab-container"},[s("mt-tab-container",{ref:"mtc",staticClass:"page-tabbar-tab-container",attrs:{swipeable:""},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[s("mt-tab-container-item",{style:{minHeight:e.ulMinHeight},attrs:{id:"all"}},e._l(e.searchedChatlist,(function(t){return s("mt-cell",{key:t.tgid},[s("li",{ref:"newsLi",refInFor:!0,staticClass:"seesion-list border-bottom-1px",on:{click:function(s){e.selectSession(t.id),e.gomesPan(t.tgid)}}},[s("div",{staticClass:"list-left"},[s("img",{staticClass:"avatar",attrs:{alt:t.user.name,src:t.user.img,width:"56",height:"56"}})]),s("div",{staticClass:"list-right"},[s("p",{staticClass:"name"},[e._v(e._s(t.user.name))]),s("span",{staticClass:"time"},[e._v(e._s(e._f("formatTime")(t.messages[t.messages.length-1].date)))]),s("mt-badge",{directives:[{name:"show",rawName:"v-show",value:t.unreadCount>0,expression:"item.unreadCount > 0"}],class:[0==t.notifications?"notice-off":"mint-badge"],attrs:{size:"normal"}},[e._v(e._s(t.unreadCount))]),s("p",{staticClass:"lastmsg"},[e._v(e._s(t.messages[t.messages.length-1].content))])],1)])])})),1),s("mt-tab-container-item",{style:{minHeight:e.ulMinHeight},attrs:{id:"person"}},e._l(e.getPersonChatList,(function(t){return s("mt-cell",{key:t.tgid},[s("li",{ref:"newsLi",refInFor:!0,staticClass:"seesion-list border-bottom-1px",on:{click:function(s){e.selectSession(t.id),e.gomesPan(t.tgid)}}},[s("div",{staticClass:"list-left"},[s("img",{staticClass:"avatar",attrs:{width:"56",height:"56",alt:t.user.name,src:t.user.img}})]),s("div",{staticClass:"list-right"},[s("p",{staticClass:"name"},[e._v(e._s(t.user.name))]),s("span",{staticClass:"time"},[e._v(e._s(e._f("formatTime")(t.messages[t.messages.length-1].date)))]),s("mt-badge",{directives:[{name:"show",rawName:"v-show",value:t.unreadCount>0,expression:"item.unreadCount > 0"}],class:[0==t.notifications?"notice-off":"mint-badge"],attrs:{type:"primary",size:"normal"}},[e._v(e._s(t.unreadCount))]),s("p",{staticClass:"lastmsg"},[e._v(e._s(t.messages[t.messages.length-1].content))])],1)])])})),1),s("mt-tab-container-item",{style:{minHeight:e.ulMinHeight},attrs:{id:"unread"}},e._l(e.unreadChatList,(function(t){return s("mt-cell",{key:t.tgid},[s("li",{ref:"newsLi",refInFor:!0,staticClass:"seesion-list border-bottom-1px",on:{click:function(s){e.selectSession(t.id),e.gomesPan(t.tgid)}}},[s("div",{staticClass:"list-left"},[s("img",{staticClass:"avatar",attrs:{alt:t.user.name,src:t.user.img,width:"56",height:"56"}})]),s("div",{staticClass:"list-right"},[s("p",{staticClass:"name"},[e._v(e._s(t.user.name))]),s("span",{staticClass:"time"},[e._v(e._s(e._f("formatTime")(t.messages[t.messages.length-1].date)))]),s("mt-badge",{directives:[{name:"show",rawName:"v-show",value:t.unreadCount>0,expression:"item.unreadCount > 0"}],class:[0==t.notifications?"notice-off":"mint-badge"],attrs:{type:"primary",size:"normal"}},[e._v(e._s(t.unreadCount))]),s("p",{staticClass:"lastmsg"},[e._v(e._s(t.messages[t.messages.length-1].content))])],1)])])})),1)],1)],1),e._l(e.searchedChatlist,(function(t){return s("li",{directives:[{name:"show",rawName:"v-show",value:e.issearchAll,expression:"issearchAll"}],key:t.tgid,ref:"newsLi",refInFor:!0,staticClass:"seesion-list border-bottom-1px",on:{click:function(s){e.selectSession(t.id),e.gomesPan(t.tgid)}}},[s("div",{staticClass:"list-left"},[s("img",{staticClass:"avatar",attrs:{alt:t.user.name,src:t.user.img,width:"56",height:"56"}})]),s("div",{staticClass:"list-right"},[s("p",{staticClass:"name"},[e._v(e._s(t.user.name))]),s("span",{staticClass:"time"},[e._v(e._s(e._f("formatTime")(t.messages[t.messages.length-1].date)))]),s("mt-badge",{directives:[{name:"show",rawName:"v-show",value:t.unreadCount>0,expression:"item.unreadCount > 0"}],attrs:{type:"primary",size:"normal"}},[e._v(e._s(t.unreadCount))]),s("p",{staticClass:"lastmsg"},[e._v(e._s(t.messages[t.messages.length-1].content))])],1)])}))],2)]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.issticky,expression:"issticky"}],staticClass:"nav sticky"},[s("mt-button",{class:{"btn-bottom":"all"===e.active},attrs:{size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.goAll(t)}}},[e._v("all")]),s("mt-button",{class:{"btn-bottom":"person"===e.active},attrs:{size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.goPerson(t)}}},[e._v("Personal"),s("mt-badge",{directives:[{name:"show",rawName:"v-show",value:e.getPersonUnreadCount>0,expression:"getPersonUnreadCount > 0"}],attrs:{type:"primary",size:"small"}},[e._v(e._s(e.getPersonUnreadCount))])],1),s("mt-button",{class:{"btn-bottom":"unread"===e.active},attrs:{size:"small"},nativeOn:{click:function(t){return t.preventDefault(),e.goUnread(t)}}},[e._v("Unread"),s("mt-badge",{directives:[{name:"show",rawName:"v-show",value:e.getUnreadDialog>0,expression:"getUnreadDialog > 0"}],attrs:{type:"primary",size:"small"}},[e._v(e._s(e.getUnreadDialog))])],1)],1)])},o=[],l=(s("b0c0"),s("5530")),u=s("f40f"),h=s("2f62"),m=s("c1df"),d=s.n(m),f={name:"",filters:{formatTime:function(e){return d()(e).format("HH:mm")}},data:function(){return{active:"all",issearchAll:!1,issticky:!1,isTop:!1}},computed:Object(l["a"])(Object(l["a"])({},Object(h["c"])(["searchedChatlist","getUnreadDialog","unreadChatList","getPersonChatList","getPersonUnreadCount"])),{},{ulMinHeight:function(){return window.innerHeight-40-50+1+"px"}}),watch:{$route:function(e,t){"messagePanel"===t.name&&this.BSrefresh()},active:function(e,t){var s=this;e!==t&&setTimeout((function(){s.BSrefresh()}),300)}},mounted:function(){var e=this;this._initData(),this.$nextTick((function(){e._initScroll()}))},methods:Object(l["a"])(Object(l["a"])({},Object(h["b"])(["selectSession"])),{},{_initScroll:function(){var e=this;this.newsScroll=new u["a"](this.$refs.news,{click:!0,probeType:3,mouseWheel:!0}),this.newsScroll.on("scroll",(function(t){-t.y>83?e.issticky=!0:e.issticky=!1}))},_initData:function(){this.$store.dispatch("search","")},gomesPan:function(e){this.$emit("searchCancel"),this.$router.push({name:"messagePanel",params:{tgid:e}})},goAll:function(){this.active="all"},goPerson:function(){this.active="person"},goUnread:function(){this.active="unread"},BSrefresh:function(){this.newsScroll.refresh()},changeSearchData:function(){this.issearchAll=!0},resetSearch:function(){this.issearchAll=!1},changeTop:function(){this.isTop=!0},cancelChangeTop:function(){this.isTop=!1}})},v=f,g=(s("776e"),s("2877")),p=Object(g["a"])(v,c,o,!1,null,"5fbfff99",null),b=p.exports,w=s("76a0"),C={name:"news",components:{commonTop:i["a"],newsList:b,commonSearch:r["a"]},data:function(){return{headerTitle:"对话",topFlag:!0}},methods:{change:function(){this.$refs.newList.changeSearchData(),this.$refs.newList.changeTop(),this.topFlag=!1},recovery:function(){this.$refs.newList.resetSearch(),this.$refs.newList.cancelChangeTop(),this.topFlag=!0},searchCancel:function(){this.$refs.search.searchCancel()},newsToast:function(){Object(w["Toast"])("待开发")}}},_=C,y=Object(g["a"])(_,a,n,!1,null,"7893a554",null);t["default"]=y.exports},"1a9f":function(e,t,s){},"1e49":function(e,t,s){},"5b59":function(e,t,s){"use strict";var a=s("1e49"),n=s.n(a);n.a},"776e":function(e,t,s){"use strict";var a=s("1a9f"),n=s.n(a);n.a},"841c":function(e,t,s){"use strict";var a=s("d784"),n=s("825a"),i=s("1d80"),r=s("129f"),c=s("14c3");a("search",1,(function(e,t,s){return[function(t){var s=i(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,s):new RegExp(t)[e](String(s))},function(e){var a=s(t,e,this);if(a.done)return a.value;var i=n(e),o=String(this),l=i.lastIndex;r(l,0)||(i.lastIndex=0);var u=c(i,o);return r(i.lastIndex,l)||(i.lastIndex=l),null===u?-1:u.index}]}))},fbbe:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search"},[s("div",{staticClass:"mint-searchbar"},[s("div",{staticClass:"mint-searchbar-inner"},[s("i",{staticClass:"mintui mintui-search",class:{"mintui-search-after":e.searchObj}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],ref:"input",staticClass:"mint-searchbar-core",attrs:{type:"search",placeholder:e.placeholder},domProps:{value:e.search},on:{click:e.searchShow,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchChange(t)},input:function(t){t.target.composing||(e.search=t.target.value)}}})]),s("a",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"mint-searchbar-cancel",domProps:{textContent:e._s(e.cancelText)},on:{click:e.searchCancel}})])])},n=[],i=(s("ac1f"),s("841c"),{name:"",props:{content:{type:String,default:""}},data:function(){return{issearchObj:!1,search:"",placeholder:"搜索",cancelText:"取消",visible:!1,searchObj:!1}},watch:{search:function(e,t){""!==this.search&&(this.$store.dispatch("search",this.search),this.$emit("bgcObj"))}},methods:{searchChange:function(){this.$store.dispatch("search",this.search)},searchCancel:function(){this.search="",this.$store.dispatch("search",""),this.visible=!1,this.searchObj=!1,this.$emit("reset")},searchShow:function(){this.searchObj=!0,this.$store.dispatch("search",this.content),this.visible=!0,this.$emit("changeLayout")}}}),r=i,c=(s("5b59"),s("2877")),o=Object(c["a"])(r,a,n,!1,null,"50bfb952",null);t["a"]=o.exports}}]);